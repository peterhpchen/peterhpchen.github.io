# 正規表達式

## 宣告方式

* literal: 不能動態, 只能是固定的字串, 使用在知道內容不會有變化的情況, 效能較好.
* constructor: 可以是動態的, 使用在知道內容會有變化或是還不知道內容（例如從其他地方取得的字串）的情況.

### literal

宣告方式用斜線（/）夾住字串, 例如：`var re = /ab+c/;`.

### constructor

用`RegExp`建立實體, 例如：`var re = new RegExp('ab+c');`.

## 特殊字元

* `*`：符合此符號前面的字元零到多次.
* `+`：符合此符號前面的字元一到多次.
* `?`：符合此符號前面的字元零到一次.
* `(x)`（capturing parentheses）：符合`x`且將其設為capturing parenthese(grouping).
* `(?:x)`（non-capturing parentheses）：符合`x`但不將其設為group, 用在要對整個字串做特殊比對時.
* `x(?=y)`（lookahead）：只有在`x`後面緊跟著`y`時才會抓出`x`.
* `x(?!y)`（negated lookahead）：只有在`x`後面沒有緊跟著`y`時才會抓出`x`.
* `{n}`: 在此符號前的字元剛好重複n次才符合條件。
* `{n,}`: 此符號前的字元最少重複n次即符合條件。
* `{n,m}`: 此符號前的字元最少重複n次，最多重複m次才符合條件。
* `\n`: 符合第n個`()`括號中的子字串條件。

### `*`

符合在`*`前面的字元零到多次, 其效果跟`{0,}`相同, 例如使用`/bo*/`, 在`A ghost booooed`中會找到`boooo`, 在`A bird warbled`中會找到`b`, 但`A goat grunted`找不到符合字串.

### `+`

符合在`+`前面的字元一到多次, 其效果跟`{1,}`一樣, 例如使用`/a+/`, 在`candy`中找的到`a`, 在`caaaaaaandy`中找的到所有`a`所組成的字串, 但是在`cndy`中找不到符合條件.

### `?`

符合在`?`前面的字元零到一次, 其效果跟`{0,1}`一樣, 例如使用`/e?le?/`, 在`angel`中找的到`el`, 在`angle`中找到`le`的字串, 在`oslo`中找到`l`字串.

如果在符號（`*`,`+`,`?`,`{}`）後加上`?`會將符合條件減至最少字元, 例如對`123abc`使用`/\d+/`會因為了符合最多的字串而取得`123`, 但是使用`/\d+?/`則只會符合最少字元的`1`.

在lookahead assertions中也會使用`x(?=y)`及`x(?!y)`來表示, 詳情請看下面章節.

### `(x)`

取得符合x的字串且將結果放群組中, 例如使用`/(foo) (bar) \1 \2/`來取得`foo bar foo bar`會有兩個群組：群組1為`foo`, 群組2為`bar`, 而因為後面接續`\1 \2`所以完整的符合條件為`foo bar foo bar`, 後面的`\1`代表`foo`, `\2`代表`bar`（在`replace`中是用`$1`, `$2`來表示），而`$&`代表完整的字串.

### `(?:x)`

取得符合x的字串但不將結果放群組中, 用途在於想要對長度大於一的字串做正規表示式的運算時使用, 例如`/foo{1,2}/`後面的`{1,2}`的效果就只有在最後一個`o`才有效果, 可是`/(foo){1,2}/`雖然可以抓出重複`foo`一到兩次的結果, 但是它會多抓群組資料, 所以最佳解法就是`/(?:foo){1,2}/`.

### `x(?=y)`

只有在`x`後面緊跟著`y`時才會取得`x`, 例如`/Jack(?=Sprat)/`一定要`Jack`後面緊接著`Sprat`才會取得`Jack`, 而`Sprat`不會在結果裡面.

### `x(?!y)`

只有在`x`後面沒有緊跟著`y`時才會取得`x`, 例如`/\d+(?!\.)/`會對應到`3.141`中的`141`, 但不會對到`3`.

### `\n`

n是一個正整數，為符合第n個()小括號中的字串條件。

例如用`/apple(,)\sorange\1/`查找`apple, orange, cherry, peach.`會符合`apple, orange,`。

## 括號

在正規表達式使用括號可以使括號中的字串被記錄。

以`/Chapter (\d+)\.\d*/`為例，在()中的一到多個數字會被記錄起來，所以`Open Chapter 4.3, paragraph 6`會取得`Chapter 4.3`這個完整的符合字串及`4`這個括號中的子字串。

## flag

* m: 換行字元後視為新的行數，可以用^等邊界條件查找。

### m

例如`\nIs th\nis it?`如果用`/^is/`查找的話會因為`is`再換行字元後所以找不到，用`/^is/m`就可以找到目標。