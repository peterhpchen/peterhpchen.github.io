---
layout: post
title: ASP.NET Web API
date: '2017-01-02T06:25:00.000-08:00'
author: Peter
tags:
- ASP.NET
- C#
- Web API
modified_time: '2017-01-02T06:29:06.316-08:00'
thumbnail: https://3.bp.blogspot.com/-visbk-Wmcuk/WGpc7E6n6DI/AAAAAAAAApw/DAB4KVWyi-oOxW6Wa9RGYH-UJ9lyI8M5gCLcB/s72-c/%25E5%2589%25B5%25E5%25BB%25BA%25E5%25B0%2588%25E6%25A1%258801.png
blogger_id: tag:blogger.com,1999:blog-8081092262828660128.post-1583243028442237520
blogger_orig_url: https://limitlessping.blogspot.com/2017/01/aspnet-web-api.html
---

<div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;">本文將建立一個基本的Web API，使用Postman做Demo</div><h2 style="font-family: 微軟正黑體; font-size: 18.0pt; margin: 0in;"><span style="font-weight: bold;">Overview</span></h2><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;">此文章將會建立一個Web API</div><h2 style="font-family: 微軟正黑體; font-size: 18.0pt; margin: 0in;"><span style="font-weight: bold;">創建專案</span></h2><div style="margin: 0in;"><span style="font-weight: normal;">1. File-&gt;New-&gt;Project…</span></div><div class="separator" style="clear: both; font-family: 微軟正黑體; text-align: center;"><a href="https://3.bp.blogspot.com/-visbk-Wmcuk/WGpc7E6n6DI/AAAAAAAAApw/DAB4KVWyi-oOxW6Wa9RGYH-UJ9lyI8M5gCLcB/s1600/%25E5%2589%25B5%25E5%25BB%25BA%25E5%25B0%2588%25E6%25A1%258801.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="369" src="https://3.bp.blogspot.com/-visbk-Wmcuk/WGpc7E6n6DI/AAAAAAAAApw/DAB4KVWyi-oOxW6Wa9RGYH-UJ9lyI8M5gCLcB/s640/%25E5%2589%25B5%25E5%25BB%25BA%25E5%25B0%2588%25E6%25A1%258801.png" width="640" /></a></div><br />2.&nbsp;Create ASP.NET Web Application<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-Z61KWbtmve0/WGpeKQFQoXI/AAAAAAAAAp4/iCkkZULLVTIsLiXwh7a3kKpMJBI1C2WPgCLcB/s1600/02.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="572" src="https://3.bp.blogspot.com/-Z61KWbtmve0/WGpeKQFQoXI/AAAAAAAAAp4/iCkkZULLVTIsLiXwh7a3kKpMJBI1C2WPgCLcB/s640/02.png" width="640" /></a></div>3.&nbsp;<span lang="zh-TW">選擇</span><span lang="en-US">Empty</span><span lang="zh-TW">，勾選Web API</span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-ehJVDU9xCIY/WGpeVv5NYtI/AAAAAAAAAp8/KAX1vbmnCNsjbulqEfexblptsoTW6pYlgCLcB/s1600/03.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="498" src="https://2.bp.blogspot.com/-ehJVDU9xCIY/WGpeVv5NYtI/AAAAAAAAAp8/KAX1vbmnCNsjbulqEfexblptsoTW6pYlgCLcB/s640/03.png" width="640" /></a></div><span lang="zh-TW">4.&nbsp;</span><span lang="zh-TW">對</span><span lang="en-US">Controller</span><span lang="zh-TW">資料夾按右鍵</span><span lang="en-US">-&gt;Add-&gt;New Item…</span><span lang="zh-TW">，新增</span><span lang="en-US">Web API Controller Class</span><span lang="zh-TW">，檔名是</span><span lang="en-US">ValuesController.cs</span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-eq-rtCGkv1I/WGpefvx_6zI/AAAAAAAAAqA/qv5bQrLWOEU8cz-fUhQuxo_ClQwzzMXpwCLcB/s1600/04.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="442" src="https://4.bp.blogspot.com/-eq-rtCGkv1I/WGpefvx_6zI/AAAAAAAAAqA/qv5bQrLWOEU8cz-fUhQuxo_ClQwzzMXpwCLcB/s640/04.png" width="640" /></a></div><span lang="en-US"><span lang="zh-TW">點開</span><span lang="en-US">ValuesController.cs</span><span lang="zh-TW">可以看到已經幫我們寫要</span><span lang="en-US">Web API</span><span lang="zh-TW">的框架了，我們現在來看一下路由的設置</span></span><br /><script src="https://gist.github.com/peterhpchen/f99a3c2ddc30a787d436195252250288.js"></script> <br /><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">可以看到</span><span lang="en-US">routeTemplate</span><span lang="zh-TW">被設置為</span></div><code style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;">"api/{controller}/{id}"</code><br /><code style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="en-US">{controller}</span><span lang="zh-TW">：要呼叫的controller name</span><span lang="en-US">(</span><span lang="zh-TW">此例子即為</span><span lang="en-US">Values)</span></code><br /><code style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="en-US">{id}</span><span lang="zh-TW">：參數資料</span></code><br /><code style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW"></span></code><br /><h2 style="font-family: 微軟正黑體; margin: 0in;"><span style="font-size: large;">建置專案</span></h2><div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">按下</span><span lang="en-US">F5</span><span lang="zh-TW">啟動偵錯</span></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">會跑出HTTP Error 403.14 - Forbidden的錯誤是因為我們沒有建立頁面，可是</span><span lang="en-US">Web API</span><span lang="zh-TW">的功能還是正常的，現在開啟</span><span lang="en-US">Postman</span><span lang="zh-TW">，</span><span lang="en-US">HTTP</span><span lang="zh-TW">動詞是</span><span lang="en-US">GET</span><span lang="zh-TW">，在</span><span lang="en-US">URL</span><span lang="zh-TW">上輸入http://localhost:</span><span lang="en-US">{Port Number}</span><span lang="zh-TW">/api/values，按下</span><span lang="en-US">Send</span></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-5ac5p_XetmI/WGpiee2BiaI/AAAAAAAAAqQ/Aigi4Eh1HqYtngBIHeLtP2WPta0jVJhbQCLcB/s1600/05.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="https://1.bp.blogspot.com/-5ac5p_XetmI/WGpiee2BiaI/AAAAAAAAAqQ/Aigi4Eh1HqYtngBIHeLtP2WPta0jVJhbQCLcB/s640/05.png" width="640" /></a></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="en-US"><br /></span></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">我們可以看由Get</span><span lang="en-US"> Action</span><span lang="zh-TW">所傳回來的陣列</span></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="en-US"> </span></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">如果改為http://localhost:</span><span lang="en-US">{Port Number}</span><span lang="zh-TW">/api/values</span><span lang="en-US">/5</span><span lang="zh-TW">會因為路由機制會導至第一個符合條件，所以會由有id參數的G</span><span lang="en-US">et</span><span lang="zh-TW">所處理</span></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-pbyVwCFgeBM/WGpifBco3_I/AAAAAAAAAqU/RB9xM45u1FUtCKj3lgAzC4HdP2gORumXgCLcB/s1600/06.png" imageanchor="1" style="font-family: &quot;Times New Roman&quot;; font-size: medium; margin-left: 1em; margin-right: 1em; text-align: center;"><img border="0" height="280" src="https://1.bp.blogspot.com/-pbyVwCFgeBM/WGpifBco3_I/AAAAAAAAAqU/RB9xM45u1FUtCKj3lgAzC4HdP2gORumXgCLcB/s640/06.png" width="640" /></a></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW"></span></div><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">就會看到單一的</span><span lang="en-US">value</span></div><h2 style="font-family: 微軟正黑體; font-size: 18.0pt; margin: 0in;"><span style="font-weight: bold;">總結</span></h2><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">這次已經完成一個簡單的</span><span lang="en-US">Web API</span><span lang="zh-TW">，透過強大的</span><span lang="en-US">Visual Studio</span><span lang="zh-TW">的模板功能，沒有動到程式碼就可以完成一個Web API的框架</span></div><h2 style="font-family: 微軟正黑體; font-size: 18.0pt; margin: 0in;"><span style="font-weight: bold;">參考連結</span></h2><div style="font-family: 微軟正黑體; font-size: 11.0pt; margin: 0in;"><span lang="zh-TW">       </span></div><div style="margin: 0in;"><div style="font-size: 11pt;"><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api">https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api</a></div><h2></h2><h2 style="font-family: 微軟正黑體; font-size: 18.0pt; margin: 0in;">GitHub</h2><div style="font-family: 微軟正黑體; margin: 0in;"><a href="https://github.com/peterhpchen/MyFirstASPNETMVCWebAPI" style="font-weight: normal;"><span style="font-size: x-small;">https://github.com/peterhpchen/MyFirstASPNETMVCWebAPI</span></a></div></div></div>